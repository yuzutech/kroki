# build static executable binary
FROM rust:1.64-slim-bullseye AS builder
RUN rustup target add x86_64-unknown-linux-musl
COPY Cargo.toml .

RUN SVGBOB_VERSION=`cat Cargo.toml | grep "svgbob_cli =" | sed -r 's/.*"([^"]+)"/\1/'` \
  && cargo install --quiet --target x86_64-unknown-linux-musl --version $SVGBOB_VERSION svgbob_cli
